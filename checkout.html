<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checkout - TechStore</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="dark-mode">
  <h1 style="text-align:center">Checkout</h1>

  <div class="cart-items" id="cartDisplay"></div>

  <form action="https://formsubmit.co/investorcompany001@gmail.com" method="POST">
    <input type="text" name="name" placeholder="Your Name" required />
    <input type="email" name="email" placeholder="Your Email" required />
    <input type="text" name="phone" placeholder="Phone Number" required />
    <textarea name="address" placeholder="Delivery Address" required></textarea>
    <input type="hidden" name="order" id="orderData" />
    <button type="submit" onclick="prepareForm()">Submit Order</button>
  </form>

  <script>
    let cart = JSON.parse(localStorage.getItem("cart")) || {};

    function renderCart() {
      const container = document.getElementById("cartDisplay");
      container.innerHTML = "";
      let total = 0;
      let summary = "";

      for (let item in cart) {
        const { quantity, price } = cart[item];
        total += quantity * price;
        summary += `${item} x${quantity} = $${quantity * price}\n`;

        container.innerHTML += `
          <div>
            <p><strong>${item}</strong> - $${price} × 
              <button onclick="updateQuantity('${item}', -1)">-</button>
              ${quantity}
              <button onclick="updateQuantity('${item}', 1)">+</button>
            </p>
          </div>
        `;
      }

      container.innerHTML += `<p><strong>Total: $${total}</strong></p>`;
    }

    function updateQuantity(item, change) {
      if (cart[item]) {
        cart[item].quantity += change;
        if (cart[item].quantity <= 0) delete cart[item];
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCart();
      }
    }

    function prepareForm() {
      const orderData = document.getElementById("orderData");
      const cart = JSON.parse(localStorage.getItem("cart")) || {};
      let summary = "";

      for (let item in cart) {
        const { quantity, price } = cart[item];
        summary += `${item}: ${quantity} × $${price} = $${quantity * price}\n`;
      }

      orderData.value = summary;
      localStorage.removeItem("cart");
    }

    renderCart();
  </script>
</body>
</html>