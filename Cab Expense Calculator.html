<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cab Expense Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: #333;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      background: #fff;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.2);
      width: 100%;
      max-width: 600px;
    }
    h1 {
      text-align: center;
      color: #4a3aff;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 1rem;
    }
    input, select {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.3rem;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 1rem;
    }
    button {
      margin-top: 1.5rem;
      width: 100%;
      padding: 0.75rem;
      border: none;
      border-radius: 12px;
      background: #4a3aff;
      color: #fff;
      font-size: 1.1rem;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #3322dd;
    }
    .result {
      margin-top: 2rem;
      background: #f7f7f7;
      padding: 1rem;
      border-radius: 12px;
      font-size: 1.1rem;
    }
    .highlight {
      color: #4a3aff;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸš– Cab Expense Calculator</h1>
    <form id="expenseForm">
      <label>Number of days cab was hired:</label>
      <input type="number" id="days" required>

      <label>Category of car:</label>
      <select id="carCategory">
        <option value="D">Deluxe (Rs.1000/day)</option>
        <option value="S">Semi Deluxe (Rs.800/day)</option>
        <option value="O">Ordinary (Rs.700/day)</option>
      </select>

      <label>Night stay involved?</label>
      <select id="nightStay">
        <option value="no">No</option>
        <option value="yes">Yes</option>
      </select>

      <div id="hotelSection" style="display:none;">
        <label>Room type:</label>
        <select id="roomType">
          <option value="normal">Normal (Rs.800/hr)</option>
          <option value="deluxe">Deluxe (Rs.1200/hr)</option>
        </select>
        <label>Number of hours stayed:</label>
        <input type="number" id="hoursStayed" min="1">
      </div>

      <label>Food expense (Rs.):</label>
      <input type="number" id="foodExpense" required>

      <label>Travel expense (Rs.):</label>
      <input type="number" id="travelExpense" required>

      <label>Add a tip?</label>
      <select id="tipChoice">
        <option value="no">No</option>
        <option value="yes">Yes</option>
      </select>

      <div id="tipSection" style="display:none;">
        <label>Tip option:</label>
        <select id="tipOption">
          <option value="1">10% Tip</option>
          <option value="2">Custom Tip %</option>
        </select>
        <input type="number" id="customTip" placeholder="Enter custom %" style="display:none;">
      </div>

      <button type="button" onclick="calculateExpense()">Calculate Total</button>
    </form>

    <div id="result" class="result" style="display:none;"></div>
  </div>

  <script>
    document.getElementById("nightStay").addEventListener("change", function() {
      document.getElementById("hotelSection").style.display = this.value === "yes" ? "block" : "none";
    });

    document.getElementById("tipChoice").addEventListener("change", function() {
      document.getElementById("tipSection").style.display = this.value === "yes" ? "block" : "none";
    });

    document.getElementById("tipOption").addEventListener("change", function() {
      document.getElementById("customTip").style.display = this.value === "2" ? "block" : "none";
    });

    function calculateExpense() {
      let days = parseInt(document.getElementById("days").value);
      let carCategory = document.getElementById("carCategory").value;
      let nightStay = document.getElementById("nightStay").value;
      let foodExpense = parseFloat(document.getElementById("foodExpense").value) || 0;
      let travelExpense = parseFloat(document.getElementById("travelExpense").value) || 0;
      let tipChoice = document.getElementById("tipChoice").value;

      let perDayCharge = carCategory === 'D' ? 1000 : carCategory === 'S' ? 800 : 700;
      let totalAmount = days * perDayCharge;
      let tax = totalAmount * 0.09;
      let netAmount = totalAmount + tax;

      let hotelExpense = 0;
      if (nightStay === "yes") {
        let roomType = document.getElementById("roomType").value;
        let hours = parseInt(document.getElementById("hoursStayed").value) || 0;
        let roomCharge = roomType === "normal" ? 800 : 1200;
        hotelExpense = hours * roomCharge;
      }

      let totalExpense = netAmount + hotelExpense + foodExpense + travelExpense;

      if (tipChoice === "no") {
        let platformFee = totalExpense * 0.20;
        totalExpense += platformFee;
        document.getElementById("result").innerHTML = `
          <p>Cab Charges (before tax): Rs. ${totalAmount}</p>
          <p>Service Tax (9%): Rs. ${tax.toFixed(2)}</p>
          <p>Hotel Expense: Rs. ${hotelExpense}</p>
          <p>Food + Travel: Rs. ${(foodExpense + travelExpense)}</p>
          <p class="highlight">Platform Fee (20%): Rs. ${platformFee.toFixed(2)}</p>
          <h2 class="highlight">Final Total: Rs. ${totalExpense.toFixed(2)}</h2>
        `;
      } else {
        let tipOption = document.getElementById("tipOption").value;
        let tipAmount = 0;
        if (tipOption === "1") {
          tipAmount = totalExpense * 0.10;
        } else {
          let customTip = parseFloat(document.getElementById("customTip").value) || 0;
          tipAmount = totalExpense * (customTip / 100);
        }
        totalExpense += tipAmount;
        document.getElementById("result").innerHTML = `
          <p>Cab Charges (before tax): Rs. ${totalAmount}</p>
          <p>Service Tax (9%): Rs. ${tax.toFixed(2)}</p>
          <p>Hotel Expense: Rs. ${hotelExpense}</p>
          <p>Food + Travel: Rs. ${(foodExpense + travelExpense)}</p>
          <p class="highlight">Tip: Rs. ${tipAmount.toFixed(2)}</p>
          <h2 class="highlight">Final Total: Rs. ${totalExpense.toFixed(2)}</h2>
        `;
      }

      document.getElementById("result").style.display = "block";
    }
  </script>
</body>
</html>
